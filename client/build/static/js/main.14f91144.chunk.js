(this["webpackJsonpbook-store-client"]=this["webpackJsonpbook-store-client"]||[]).push([[0],{266:function(e,t,a){e.exports=a(449)},449:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(60),o=a.n(l),c=a(43),i=a.n(c),u=a(71),s=a(37),m=a(61),d=a.n(m),b=a(62),p=a(17),E=a(458),v=a(465),h=a(459),f={books:{}},O=Object(n.createContext)([f,function(){return f}]),k=function(e){var t=e.reducer,a=e.children,l=Object(n.useReducer)(t,f),o=Object(s.a)(l,2),c=o[0],i=o[1];return r.a.createElement(O.Provider,{value:[c,i]},a)},j=function(){return Object(n.useContext)(O)},g=a(23),C=a(463),y=a(464),x=a(461),A=a(467),S=a(26),w=a(466),D=a(460),B=function(e){var t=e.field,a=e.label,n=e.placeholder;return r.a.createElement(D.a.Field,null,r.a.createElement("label",null,a),r.a.createElement(S.b,Object.assign({},t,{placeholder:n})),r.a.createElement("div",{style:{color:"red"}},r.a.createElement(S.a,{name:t.name})))},H=function(e){var t=e.field,a=e.label,n=e.min,l=e.max;return r.a.createElement(D.a.Field,null,r.a.createElement("label",null,a),r.a.createElement(S.b,Object.assign({},t,{type:"number",min:n,max:l})),r.a.createElement("div",{style:{color:"red"}},r.a.createElement(S.a,{name:t.name})))},I=function(e){var t=e.onSubmit,a=e.onClose;return r.a.createElement(S.d,{initialValues:{isbn:"",title:"",published:"",author:"",genres:[],rating:0,description:""},onSubmit:t,validate:function(e){var t="You must fill out form",a={};return e.title||(a.title=t),e.published.match(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/g)||(a.published="Invalid date format"),e.author||(a.author=t),a}},(function(e){var t=e.isValid,n=e.dirty;return r.a.createElement(S.c,{className:"form ui"},r.a.createElement(S.b,{label:"Book Title",placeholder:"Title",name:"title",component:B}),r.a.createElement(S.b,{label:"Published Date",placeholder:"YYYY-MM-DD",name:"published",component:B}),r.a.createElement(S.b,{label:"Author name",placeholder:"Author",name:"author",component:B}),r.a.createElement(S.b,{label:"Genres",placeholder:"Thriller, Adventure, Horror (optional)",name:"genres",component:B}),r.a.createElement(S.b,{label:"Description",placeholder:"Description (optional)",name:"description",component:B}),r.a.createElement(S.b,{label:"Rating",placeholder:"Rating",name:"rating",min:0,max:5,component:H}),r.a.createElement(w.a,null,r.a.createElement(w.a.Column,{floated:"left"},r.a.createElement(y.a,{type:"button",color:"red",onClick:a},"Cancel")),r.a.createElement(w.a.Column,{floated:"right"},r.a.createElement(y.a,{type:"submit",floated:"right",color:"blue",disabled:!n||!t},"Save"))))}))},T=function(e){var t=e.onSubmit,a=e.onClose,n=e.modalOpen,l=e.errMsg;return r.a.createElement(x.a,{open:n,onClose:a,centered:!1,closeIcon:!0},r.a.createElement(x.a.Header,null,"Add a new book"),r.a.createElement(x.a.Content,null,l&&r.a.createElement(A.a,{inverted:!0,color:"red"},"Error: ".concat(l)),r.a.createElement(I,{onSubmit:t,onClose:a})))},_=a(469),R=function(e){var t=e.rating;return r.a.createElement("div",{className:"rating-bar"},r.a.createElement(_.a,{icon:"star",disabled:!0,rating:t,maxRating:5}))},K=function(){var e=j(),t=Object(s.a)(e,2),a=t[0].books,n=t[1],l=r.a.useState(!1),o=Object(s.a)(l,2),c=o[0],m=o[1],p=r.a.useState(""),v=Object(s.a)(p,2),h=v[0],f=v[1],O=function(){m(!1),f("")},k=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(g.a)(Object(g.a)({},t),{},{isbn:Math.floor(1e9+9e9*Math.random()).toString(),genres:t.genres.toString().replace(/ /g,"").split(",")}),e.next=4,d.a.post("".concat("/api","/books"),a);case 4:r=e.sent,l=r.data,n({type:"ADD_BOOK",payload:l}),O(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.response.data.error),f(e.t0.response.data.error);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(E.a,{textAlign:"center"},r.a.createElement("h3",null,"Book List")),r.a.createElement(C.a,{celled:!0},r.a.createElement(C.a.Header,null,r.a.createElement(C.a.Row,null,r.a.createElement(C.a.HeaderCell,null,"Title"),r.a.createElement(C.a.HeaderCell,null,"Author"),r.a.createElement(C.a.HeaderCell,null,"Published"),r.a.createElement(C.a.HeaderCell,null,"Genres"),r.a.createElement(C.a.HeaderCell,null,"Rating"))),r.a.createElement(C.a.Body,null,Object.values(a).map((function(e,t){return r.a.createElement(C.a.Row,{key:t},r.a.createElement(C.a.Cell,null,r.a.createElement(b.b,{to:"/books/"+e.isbn},e.title)),r.a.createElement(C.a.Cell,null,e.author),r.a.createElement(C.a.Cell,null,e.published),r.a.createElement(C.a.Cell,null,e.genres.join(", ")),r.a.createElement(C.a.Cell,null,r.a.createElement(R,{rating:e.rating||0})))})))),r.a.createElement(T,{modalOpen:c,onSubmit:k,onClose:O,errMsg:h}),r.a.createElement(y.a,{onClick:function(){m(!0)}},"Add new book"))},M=a(85),L=function(){var e=j(),t=Object(s.a)(e,2),a=t[0].books,n=t[1],l=Object(p.f)().isbn,o=Object.values(a).find((function(e){return e.isbn===l})),c=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat("/api","/books/").concat(l));case 3:return t=e.sent,a=t.data,e.next=7,d.a.delete("".concat("/api","/books/").concat(l));case 7:n({type:"DEL_BOOK",payload:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.response.data.error);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(E.a,{textAlign:"left"},r.a.createElement("h3",null,null===o||void 0===o?void 0:o.title,r.a.createElement(R,{rating:(null===o||void 0===o?void 0:o.rating)||0})),r.a.createElement(h.a,null),r.a.createElement("div",null,"Author: ",null===o||void 0===o?void 0:o.author),r.a.createElement("div",null,"Published: ",null===o||void 0===o?void 0:o.published),r.a.createElement("div",null,"Genres: ",null===o||void 0===o?void 0:o.genres.join(", ")),r.a.createElement("div",null,"Description: ",null===o||void 0===o?void 0:o.description)),r.a.createElement(h.a,{hidden:!0}),r.a.createElement(y.a,{as:b.b,to:"/",basic:!0,color:"red",onClick:c},"Delete"))},N=function(){var e=j(),t=Object(s.a)(e,2)[1],a=r.a.useState("home"),n=Object(s.a)(a,2),l=n[0],o=n[1];return r.a.useEffect((function(){Object(u.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat("/api","/books"));case 3:a=e.sent,n=a.data,t({type:"SET_BOOK_LIST",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[t]),r.a.createElement("div",{className:"App"},r.a.createElement(b.a,null,r.a.createElement(E.a,null,r.a.createElement(v.a,{pointing:!0,secondary:!0},r.a.createElement(v.a.Item,{as:b.b,to:"/",name:"home",active:"home"===l,onClick:function(){return o("home")}},"Home"),r.a.createElement(v.a.Item,{name:"book",active:"book"===l,onClick:function(){return o("book")}},"Book"),r.a.createElement(v.a.Item,{name:"author",active:"author"===l,onClick:function(){return o("author")}},"Author")),r.a.createElement(h.a,{hidden:!0}),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/books/:isbn",render:function(){return r.a.createElement(L,null)}}),r.a.createElement(p.a,{path:"/",render:function(){return r.a.createElement(K,null)}})))))};a(448);o.a.render(r.a.createElement(k,{reducer:function(e,t){switch(t.type){case"SET_BOOK_LIST":return Object(g.a)(Object(g.a)({},e),{},{books:Object(g.a)(Object(g.a)({},t.payload.reduce((function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(M.a)({},t.isbn,t))}),{})),e.books)});case"ADD_BOOK":return Object(g.a)(Object(g.a)({},e),{},{books:Object(g.a)(Object(g.a)({},e.books),{},Object(M.a)({},t.payload.isbn,t.payload))});case"DEL_BOOK":var a=Object(g.a)(Object(g.a)({},e),{},{books:Object(g.a)({},e.books)});return delete a.books[t.payload.isbn],a;default:return e}}},r.a.createElement(N,null)),document.getElementById("root"))}},[[266,1,2]]]);
//# sourceMappingURL=main.14f91144.chunk.js.map